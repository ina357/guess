var PRODUCT={init:function(){this.like();},like:function(){$('.btn-like-count').off('click.like').on('click.like',function(evt){evt.preventDefault();if(!GUESS.memid){GUESS.login();return false;}var e=$(this);var hottcode=e.attr('data-hottcode');var section=e.data('section');var act=(e.hasClass('active'))?'release':'like';var cnt=parseInt(e.find('span').text());var target=$('[data-hottcode="'+hottcode+'"]');target.toggleClass('active');cnt=(act=='like')?cnt+1:cnt-1;target.find('span').text(cnt);$.ajax({url:'/proc/widget.proc.php',data:{mode:'like',act:act,section:section,hott_code:hottcode},dataType:'json',type:'POST',success:function(r){if(r.success){}else{if(r.msg=='login'){GUESS.login();}else{alert(r.msg);}}}})});}}var FLOATING={basket:function(){$('#float_basket').load('/front/float_basket.php',function(){$("#inc_basket").each(function(){$(this).mCustomScrollbar({theme:"dark-3"});});$('.list_up').each(function(){var delay=300;$(this).children().each(function(){$(this).delay(delay).animate({opacity:'1',marginTop:'0'},400);delay+=100;});});PRODUCT.like();});},like:function(){var dir=(GUESS.vp=='MOBILE')?'m':'front';$('#float_like').load('/'+dir+'/float_like.php',function(){PRODUCT.like();});},today:function(){var dir=(GUESS.vp=='MOBILE')?'m':'front';$('#float_today').load('/'+dir+'/float_today.php',function(){PRODUCT.like();});}}var UTIL={cookieSet:function(cookieName,cookieValue,cookieExp){var date=new Date();date.setTime(date.getTime()+cookieExp*24*60*60*1000);document.cookie=cookieName+'='+cookieValue+';expires='+date.toUTCString()+';path=/';},cookieRemove:function(cookieName){var expireDate=new Date();expireDate.setDate(expireDate.getDate()-1);document.cookie=cookieName+"= "+"; expires="+expireDate.toGMTString()+"; path=/";},href:function(href){document.location.href=href;}}var UI={numberFormat:function(num){var num=parseFloat(num);if(isNaN(num))return"0";else{var reg=/(^[+-]?\d+)(\d{3})/;var n=(num+'');while(reg.test(n))n=n.replace(reg,'$1'+','+'$2');return n;}},toggleCheck:function(callback){$('[data-all]').off('click.toggle').on('click.toggle',function(event){var target_id=$(this).data('all');var target=$('[name="'+target_id+'"]');if(this.checked){target.prop('checked',true);}else{target.prop('checked',false);}if(target.length>0)if($.isFunction(callback))callback();});},getChecked:function(el_name){var checked=$('input:checkbox[name="'+el_name+'"]:checked');return checked;},modal:function(modal_id,url,param){var modal=$('#'+modal_id);var me=this;modal.wrap('<div class="popup-dim">');modal.load(url,param,function(){modal.attr("tabindex","0").stop().fadeIn(500).focus();modal.css({'margin-top':'-'+Math.ceil(modal.height()/2)+'px','margin-left':'-'+modal.width()/2+'px','z-index':'1500'})$('body').css('overflow-y','hidden');modal.find(".modal-close").on('click',function(){$('body').css('overflow-y','auto');modal.css({'z-index':'10'})modal.unwrap();modal.stop().fadeOut(300,function(){});});});},modalClose:function(){me.modal.css('display','none');},pop:function(pop_id,url,param){var pop=$('#'+pop_id);var me=this;pop.wrap('<div class="popup-dim">');pop.load(url,param,function(){pop.attr("tabindex","0").stop().fadeIn(500).focus();pop.find(".pop-close").on('click',function(){$('body').css('overflow-y','auto');pop.css({'z-index':'10'})pop.unwrap();pop.stop().fadeOut(300,function(){});});});},checkRepeat:function(el){var conts=$(el).val();var valid=true;var pre='';var repeat=0;for(var i=0;i<conts.length;i++){if(pre==conts[i]){repeat++;}else{pre=conts[i];repeat=0;}if(repeat>=5){return"동일글자가 5회 이상입니다.";break;}}}}var FloatToday={removeAll:function(){if($('.cu_history_list li:visible:not(.empty)').length<1){alert('삭제할 상품이 없습니다.');return false;}else{if(!confirm('삭제하시겠습니까?'))return false;}UTIL.cookieRemove('VPC');$('.cu_history_list').find('li.empty').removeClass('hide');$('.cu_history_list li:not(.empty)').slideUp(300);}}var SNS={naverblog:function(tit){var url=encodeURI(encodeURIComponent(window.location.href));var title=encodeURI(tit);var shareURL="http://share.naver.com/web/shareView.nhn?url="+url+"&title="+title;window.open(shareURL,'_blank');},facebook:function(){window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),'facebook-share-dialog','width=626,height=436');},kakaolink:function(content){Kakao.Link.sendDefault({objectType:'feed',content:content,buttonTitle:'guesskorea.com'});}}var GUESS={login:function(){if(!confirm("로그인 후 이용이 가능합니다.\n로그인 화면으로 이동하시겠습니까?"))return false;var href=(GUESS.vp=='MOBILE')?'/m/login.php':'/front/login.php';href+='?chUrl='+encodeURIComponent($(location).attr('pathname')+$(location).attr('search'));document.location.href=href;},logout:function(){location.href="/main/main.php?type=logout";},viewport:function(vp){UTIL.cookieSet('GVP',vp,1);document.location.href='/';}}function maxLengthCheck(object){if(object.value.length>object.maxLength){object.value=object.value.slice(0,object.maxLength);}}